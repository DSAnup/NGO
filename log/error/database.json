{"Error":{"Code":null,"Message":"42S22 (1054): Unknown column 'L.LoanIdentity' in 'where clause'"},"Time":"Tue, 09 Feb 2021 15:15:29 +0600","Procedure":{"Namespace":"sPHP","Object":"sPHP\\Database","Method":"LogError","Argument":{"SQL":"\r\n\t\t\t\t\t\t\tDROP TEMPORARY TABLE IF EXISTS next_payday;\r\n\t\t\t\t\t\t\tCREATE TEMPORARY TABLE next_payday(\r\n\t\t\t\t\t\t\tSELECT\t\t\tLT.LoanID, MIN(LT.LoanTransactionPayableDate) AS NEXTPAYDAY\r\n\t\t\t\t\t\t\tFROM\t\t\tims_loantransaction AS LT\r\n\t\t\t\t\t\t\tWHERE\t\t\tLT.LoanTransactionIsPaid = 0\r\n\t\t\t\t\t\t\tGROUP BY\t\tLT.LoanID\r\n\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\tDROP TEMPORARY TABLE IF EXISTS last_payday;\r\n\t\t\t\t\t\t\tCREATE TEMPORARY TABLE last_payday(\r\n\t\t\t\t\t\t\tSELECT\t\t\tCOUNT(*) AS LASTPAYCOUNT,\r\n\t\t\t\t\t\t\t\t\t\t\tLT.LoanID,\r\n\t\t\t\t\t\t\t\t\t\t\tMAX(LT.LoanTransactionPaidDate) AS LASTPAYDAY\r\n\t\t\t\t\t\t\tFROM\t\t\tims_loantransaction AS LT\r\n\t\t\t\t\t\t\tWHERE\t\t\tLT.LoanTransactionIsPaid = 1\r\n\t\t\t\t\t\t\tGROUP BY\t\tLT.LoanID\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tSELECT \t\t\tCOUNT(0) AS TerminalCount, L.LoanID\r\n\t\t\t\t\t\t\tFROM\t\t\tims_loan AS L\r\n\t\t\t\t\t\t\t\tLEFT JOIN\tnext_payday AS T ON T.LoanID = L.LoanID\r\n\t\t\t\t\t\t\t\tLEFT JOIN\tlast_payday AS LP ON LP.LoanID = L.LoanID\r\n\t\t\t\t\t\t\t\tLEFT JOIN\tims_loanscheme AS LS ON L.LoanSchemeID = LS.LoanSchemeID\r\n\t\t\t\t\t\t\t\tLEFT JOIN\tsphp_user AS U ON U.UserID = L.UserID;\r\n\r\n\t\t\t\t\t\t\tSELECT \t\t\tL.LoanID, \r\n\t\t\t\t\t\t\t\t\t\t\tCONCAT(L.LoanPrefix, '_', L.LoanID) AS LoanIdentity,\r\n\t\t\t\t\t\t\t\t\t\t\tL.LoanSchemeID,\r\n\t\t\t\t\t\t\t\t\t\t\tL.LoanDate,\r\n\t\t\t\t\t\t\t\t\t\t\tT.NEXTPAYDAY,\r\n\t\t\t\t\t\t\t\t\t\t\tLP.LASTPAYDAY,  \r\n\t\t\t\t\t\t\t\t\t\t\tLP.LASTPAYCOUNT,\r\n\t\t\t\t\t\t\t\t\t\t\tU.UserSignInName AS Customer,\r\n\t\t\t\t\t\t\t\t\t\t\tLS.LoanSchemePayPerInstallment AS PerInstallment,\r\n\t\t\t\t\t\t\t\t\t\t\tLS.LoanSchemeTotalInstallment,\r\n\t\t\t\t\t\t\t\t\t\t\t(LS.LoanSchemeTotalInstallment - LP.LASTPAYCOUNT) AS REMAININSTALLMENT\r\n\t\t\t\t\t\t\tFROM \t\t\tims_loan AS L\r\n\t\t\t\t\t\t\t\tLEFT JOIN\tnext_payday AS T ON T.LoanID = L.LoanID\r\n\t\t\t\t\t\t\t\tLEFT JOIN\tlast_payday AS LP ON LP.LoanID = L.LoanID\r\n\t\t\t\t\t\t\t\tLEFT JOIN\tims_loanscheme AS LS ON L.LoanSchemeID = LS.LoanSchemeID\r\n\t\t\t\t\t\t\t\tLEFT JOIN\tsphp_user AS U ON U.UserID = L.UserID\r\n\t\t\t\t\t\t\tWHERE\t\t\tTRUE AND (\r\n\t\t\tU.UserSignInName LIKE '%ANUP%'\r\n\t\t\tOR L.LoanIdentity LIKE '%ANUP%'\r\n\t)\r\n\t\t\t\t\t\t\tLIMIT\t\t\t0, 20\t\t\r\n\t\t\t\t\t\t\t;\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tDROP TEMPORARY TABLE last_payday;\r\n\t\t\t\t\t\t\tDROP TEMPORARY TABLE next_payday;\r\n\r\n","Parameter":null}},"Callstack":[{"file":"E:\\xampp\\htdocs\\insurance\\script\\Loan\\LoanHistory.php","line":59,"function":"Query","class":"sPHP\\Database","object":{},"type":"->","args":["\r\n\t\t\t\t\t\t\tDROP TEMPORARY TABLE IF EXISTS next_payday;\r\n\t\t\t\t\t\t\tCREATE TEMPORARY TABLE next_payday(\r\n\t\t\t\t\t\t\tSELECT\t\t\tLT.LoanID, MIN(LT.LoanTransactionPayableDate) AS NEXTPAYDAY\r\n\t\t\t\t\t\t\tFROM\t\t\tims_loantransaction AS LT\r\n\t\t\t\t\t\t\tWHERE\t\t\tLT.LoanTransactionIsPaid = 0\r\n\t\t\t\t\t\t\tGROUP BY\t\tLT.LoanID\r\n\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\tDROP TEMPORARY TABLE IF EXISTS last_payday;\r\n\t\t\t\t\t\t\tCREATE TEMPORARY TABLE last_payday(\r\n\t\t\t\t\t\t\tSELECT\t\t\tCOUNT(*) AS LASTPAYCOUNT,\r\n\t\t\t\t\t\t\t\t\t\t\tLT.LoanID,\r\n\t\t\t\t\t\t\t\t\t\t\tMAX(LT.LoanTransactionPaidDate) AS LASTPAYDAY\r\n\t\t\t\t\t\t\tFROM\t\t\tims_loantransaction AS LT\r\n\t\t\t\t\t\t\tWHERE\t\t\tLT.LoanTransactionIsPaid = 1\r\n\t\t\t\t\t\t\tGROUP BY\t\tLT.LoanID\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tSELECT \t\t\tCOUNT(0) AS TerminalCount, L.LoanID\r\n\t\t\t\t\t\t\tFROM\t\t\tims_loan AS L\r\n\t\t\t\t\t\t\t\tLEFT JOIN\tnext_payday AS T ON T.LoanID = L.LoanID\r\n\t\t\t\t\t\t\t\tLEFT JOIN\tlast_payday AS LP ON LP.LoanID = L.LoanID\r\n\t\t\t\t\t\t\t\tLEFT JOIN\tims_loanscheme AS LS ON L.LoanSchemeID = LS.LoanSchemeID\r\n\t\t\t\t\t\t\t\tLEFT JOIN\tsphp_user AS U ON U.UserID = L.UserID;\r\n\r\n\t\t\t\t\t\t\tSELECT \t\t\tL.LoanID, \r\n\t\t\t\t\t\t\t\t\t\t\tCONCAT(L.LoanPrefix, '_', L.LoanID) AS LoanIdentity,\r\n\t\t\t\t\t\t\t\t\t\t\tL.LoanSchemeID,\r\n\t\t\t\t\t\t\t\t\t\t\tL.LoanDate,\r\n\t\t\t\t\t\t\t\t\t\t\tT.NEXTPAYDAY,\r\n\t\t\t\t\t\t\t\t\t\t\tLP.LASTPAYDAY,  \r\n\t\t\t\t\t\t\t\t\t\t\tLP.LASTPAYCOUNT,\r\n\t\t\t\t\t\t\t\t\t\t\tU.UserSignInName AS Customer,\r\n\t\t\t\t\t\t\t\t\t\t\tLS.LoanSchemePayPerInstallment AS PerInstallment,\r\n\t\t\t\t\t\t\t\t\t\t\tLS.LoanSchemeTotalInstallment,\r\n\t\t\t\t\t\t\t\t\t\t\t(LS.LoanSchemeTotalInstallment - LP.LASTPAYCOUNT) AS REMAININSTALLMENT\r\n\t\t\t\t\t\t\tFROM \t\t\tims_loan AS L\r\n\t\t\t\t\t\t\t\tLEFT JOIN\tnext_payday AS T ON T.LoanID = L.LoanID\r\n\t\t\t\t\t\t\t\tLEFT JOIN\tlast_payday AS LP ON LP.LoanID = L.LoanID\r\n\t\t\t\t\t\t\t\tLEFT JOIN\tims_loanscheme AS LS ON L.LoanSchemeID = LS.LoanSchemeID\r\n\t\t\t\t\t\t\t\tLEFT JOIN\tsphp_user AS U ON U.UserID = L.UserID\r\n\t\t\t\t\t\t\tWHERE\t\t\tTRUE AND (\r\n\t\t\tU.UserSignInName LIKE '%ANUP%'\r\n\t\t\tOR L.LoanIdentity LIKE '%ANUP%'\r\n\t)\r\n\t\t\t\t\t\t\tLIMIT\t\t\t0, 20\t\t\r\n\t\t\t\t\t\t\t;\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tDROP TEMPORARY TABLE last_payday;\r\n\t\t\t\t\t\t\tDROP TEMPORARY TABLE next_payday;\r\n\r\n"]}]}